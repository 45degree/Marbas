# 渲染硬件接口(RHI)

渲染硬件接口是对不同平台的图形api的封装, 设计目的是为了方便切换不同平台API, 目前只支持OPENGL,
后续将支持VULKAN。

## 接口定义

### buffer

#### VAO

#### VBO

#### EBO

#### UBO

#### SSBO

### image

#### texture

#### Image Load Storage

[wiki](https://www.khronos.org/opengl/wiki/Image_Load_Store)

### renderpass

`renderpass`可以看作是渲染过程中的一个子过程，其输入是各种附加件(如颜色组件，深度组件等)等,
`renderpass`在创建的时候需要指定其需要的组建，而在执行时需要传递一个`framebuffer`, `renderpass`会从
这里拿到相应的组件，并将结果绘制到`framebuffer`中。`renderpass`并不需要定义完整的绘制流程，
其绘制流程在`commandbuffer`中设置, 这样的目的是为了增加灵活性.

> **目前没有实现subpass的打算**

理论上来说一个renderpass上面可以有多个subpass, 关于`subpass`可以阅读
[这篇介绍](https://gavinkg.github.io/ILearnVulkanFromScratch-CN/mdroot/Vulkan%20%E8%BF%9B%E9%98%B6/Subpass/Subpass%20%E5%88%9D%E6%AD%A5.html)

OpenGL没有提供subpass的功能, 可以使用`Pixel Local Storage`模拟实现, 可以查看
[这篇文章](https://blog.csdn.net/zju_fish1996/article/details/112847781)作为参考

### Descriptor Set

Descriptor是用来向`pipeline`中传递的全局数据, 可以是一下几种类型:
1. 采样器
2. Shader 中能被采样的纹理对象。
3. 将采样器和能够采样的纹理对象打包起来，成为一个资源描述，之后会提到。
4. UBO
5. SSBO

每条`pipeline` 中可以有多个Descriptor, 这些`Descriptor`被称为`Descriptor Set`。`Descriptor`被存放在一个
`Descriptor Pool`的地方, 一个`Descriptor Pool`可以有多个`SubPool`,
一个`SubPool`用来存放所有相同类型的`Descriptor`。

### command

command一共有以下几种

1. bind renderpass
2. bind Pipeline
3. bind vertex array
4. set viewport
5. draw

command buffer是所有command的集合, 里面设置了command的顺序


### 渲染管线(Pipeline)

渲染管线有如下类型

1. GraphicsPipeLine

传统的光栅化渲染管线, 每条渲染管线只有一个`renderpass`
bind descriptor set



## 设计参考资料

1. [Vulkan学习笔记](https://gavinkg.github.io/ILearnVulkanFromScratch-CN/)
